/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
import { loadAPIs, loadClient, loadGapi } from "../gapi.js";
const DRIVE_DISCOVERY_DOC = "https://www.googleapis.com/discovery/v1/apis/drive/v3/rest";
export default {
    invoke: async (inputs) => {
        const { accessToken, q } = inputs;
        const gapi = await loadGapi();
        const client = (await loadAPIs(await loadClient(gapi), {
            [DRIVE_DISCOVERY_DOC]: "drive",
        }));
        if (!gapi.auth.getToken()) {
            gapi.auth.setToken({
                access_token: accessToken,
            });
        }
        const list = (await client.drive?.files.list({
            q,
        }));
        return { list };
    },
};
//# sourceMappingURL=drive-list.js.map